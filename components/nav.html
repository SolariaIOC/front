<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top nav-scroll mb-sm-3 mb-md-3 mb-3 py-2">
    <div class="container-fluid">
        <a class="navbar-brand ms-3" href="/index.html">
            <img src="assets/brand/Solaria.svg" width="120" alt="Logo Solaria" aria-hidden="true">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler"
            aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarToggler">
            <ul class="navbar-nav me-auto  text-center">
                <li class="nav-item">
                    <!--CAMBIAR DIRECCION-->
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item  ">
                    <a class="nav-link" href="#">Immobles</a>
                </li>

            </ul>

            <div id="nom-usuari-container" class="text-center" >

            </div>
            <!--<button value="account-profile"  class="btn btn-user-profile">-->

            </button>


            <div id="btn-login-container" class="d-flex flex-column">
                <button id="btn-login" value="login" class="btn btn-outline-primary  m-3" data-bs-toggle="modal"
                    href="#staticBackdrop"> <i class="fa-solid fa-arrow-right-to-bracket me-2"></i> login </button>

            </div>

        </div>
    </div>
</nav>


<script>



    const payloadRec = JSON.parse(localStorage.getItem('usuario'));
    const btnContainer = document.getElementById("btn-login-container");
    const btnLogin = document.getElementById("btn-login");
    const nomContainer = document.getElementById('nom-usuari-container')

    let usuario;
    payloadRec ? usuario = payloadRec.usuario : usuario = null;




    (function () {


        if (usuario != null) {


     

         


            let btnProfile = document.createElement('button');
            btnProfile.textContent = 'Benvingut, ' + usuario.Nom;
            btnProfile.value = "account profile"
            btnProfile.setAttribute('id', 'perfil-usuari')
            btnProfile.setAttribute('onclick', 'location.assign("/dashboard.html")')
            btnProfile.classList.add('btn', 'btn-user-profile')

            let iconoUsuario = document.createElement("i")
            iconoUsuario.setAttribute('aria-hidden', true);
            iconoUsuario.classList.add("fa-solid", "fa-user", "m-2", "me-0'", "mt-0", "mb-0", "pr-5")

            btnProfile.appendChild(iconoUsuario);





            nomContainer.appendChild(btnProfile);



            let logout = document.createElement("button");
            let logoutIcon = document.createElement('i')

            logoutIcon.classList.add('fa-solid', 'fa-arrow-right-to-bracket', 'm-3', 'mr-1', 'mb-0', 'mt-0', 'me-0', 'pr-5')


            logout.classList.add("btn", "btn-outline-primary", "m-3")
            logout.setAttribute('onclick', 'logout();')
            logout.id = "btn-logout";
            logout.textContent = 'logout';


            logout.appendChild(logoutIcon)

            //cambio boton login pot logout

            btnContainer.replaceChildren(logout)


            // AÃ±adimos boton account usuario
            let toggler = document.getElementById('navbarToggler')

        






        }
    })();


    function logout() {

        const benvinguda = document.getElementById('perfil-usuari')
        //quitar banner
        nomContainer.removeChild(benvinguda);

        // Elimina usuario
        localStorage.removeItem('usuario');
        localStorage.removeItem('token');

        // Elimina token
        (() => document.cookie = 'token' + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;')();
        btnContainer.replaceChildren(btnLogin)

    }


</script>